Index: squid/helpers/basic_auth/MSNT/usersfile.c
diff -c squid/helpers/basic_auth/MSNT/usersfile.c:1.1.2.3 squid/helpers/basic_auth/MSNT/usersfile.c:1.1.2.4
*** squid/helpers/basic_auth/MSNT/usersfile.c:1.1.2.3	Sat Jul  6 14:56:07 2002
--- squid/helpers/basic_auth/MSNT/usersfile.c	Tue May  6 01:55:46 2003
***************
*** 107,115 ****
  	    uf->names = calloc(uf->Alloc, sizeof(*uf->names));
  	} else if (uf->Inuse == uf->Alloc) {
  	    uf->Alloc = uf->Alloc << 1;
! 	    uf->names = realloc(uf->names, uf->Alloc);
  	    /* zero out the newly allocated memory */
! 	    memset(uf->names[uf->Alloc >> 1],
  		'\0',
  		(uf->Alloc >> 1) * sizeof(*uf->names));
  	}
--- 107,115 ----
  	    uf->names = calloc(uf->Alloc, sizeof(*uf->names));
  	} else if (uf->Inuse == uf->Alloc) {
  	    uf->Alloc = uf->Alloc << 1;
! 	    uf->names = realloc(uf->names, uf->Alloc * sizeof(*uf->names));
  	    /* zero out the newly allocated memory */
! 	    memset(&uf->names[uf->Alloc >> 1],
  		'\0',
  		(uf->Alloc >> 1) * sizeof(*uf->names));
  	}
***************
*** 170,175 ****
--- 170,178 ----
  
      /* Stat the allowed users file. If it cannot be accessed, return. */
  
+     if (uf->path == NULL)
+ 	return;
+ 
      if (stat(uf->path, &ChkBuf) < 0) {
  	if (errno == ENOENT) {
  	    uf->LMT = 0;
***************
*** 186,191 ****
      /*
       * The file changed, so re-read it.
       */
!     syslog(LOG_INFO, "Check_forchange: Reloading user list.");
      Read_usersfile(NULL, uf);
  }
--- 189,194 ----
      /*
       * The file changed, so re-read it.
       */
!     syslog(LOG_INFO, "Check_forfilechange: Reloading user list '%s'.", uf->path);
      Read_usersfile(NULL, uf);
  }
