Index: squid/src/Packer.c
diff -c squid/src/Packer.c:1.13.2.1 squid/src/Packer.c:1.13.2.2
*** squid/src/Packer.c:1.13.2.1	Fri Mar 25 19:50:51 2005
--- squid/src/Packer.c	Thu Sep  1 16:22:23 2005
***************
*** 108,114 ****
  {
      assert(p && e);
      p->append = (append_f) store_append;
!     p->vprintf = (vprintf_f) store_vprintf;
      p->real_handle = e;
  }
  
--- 108,114 ----
  {
      assert(p && e);
      p->append = (append_f) store_append;
!     p->packer_vprintf = (vprintf_f) store_vprintf;
      p->real_handle = e;
  }
  
***************
*** 118,124 ****
  {
      assert(p && mb);
      p->append = (append_f) memBuf_append;
!     p->vprintf = (vprintf_f) memBuf_vprintf;
      p->real_handle = mb;
  }
  
--- 118,124 ----
  {
      assert(p && mb);
      p->append = (append_f) memBuf_append;
!     p->packer_vprintf = (vprintf_f) memBuf_vprintf;
      p->real_handle = mb;
  }
  
***************
*** 129,135 ****
      assert(p);
      /* it is not really necessary to do this, but, just in case... */
      p->append = NULL;
!     p->vprintf = NULL;
      p->real_handle = NULL;
  }
  
--- 129,135 ----
      assert(p);
      /* it is not really necessary to do this, but, just in case... */
      p->append = NULL;
!     p->packer_vprintf = NULL;
      p->real_handle = NULL;
  }
  
***************
*** 161,167 ****
      fmt = va_arg(args, char *);
  #endif
      assert(p);
!     assert(p->real_handle && p->vprintf);
!     p->vprintf(p->real_handle, fmt, args);
      va_end(args);
  }
--- 161,167 ----
      fmt = va_arg(args, char *);
  #endif
      assert(p);
!     assert(p->real_handle && p->packer_vprintf);
!     p->packer_vprintf(p->real_handle, fmt, args);
      va_end(args);
  }
Index: squid/src/structs.h
diff -c squid/src/structs.h:1.408.2.46 squid/src/structs.h:1.408.2.47
*** squid/src/structs.h:1.408.2.46	Thu Sep  1 15:58:50 2005
--- squid/src/structs.h	Thu Sep  1 16:22:23 2005
***************
*** 839,845 ****
  struct _Packer {
      /* protected, use interface functions instead */
      append_f append;
!     vprintf_f vprintf;
      void *real_handle;		/* first parameter to real append and vprintf */
  };
  
--- 839,845 ----
  struct _Packer {
      /* protected, use interface functions instead */
      append_f append;
!     vprintf_f packer_vprintf;
      void *real_handle;		/* first parameter to real append and vprintf */
  };
  
