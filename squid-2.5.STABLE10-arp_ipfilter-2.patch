Index: squid/src/client_side.c
diff -c squid/src/client_side.c:1.561.2.80 squid/src/client_side.c:1.561.2.82
*** squid/src/client_side.c:1.561.2.80	Thu Jun 30 02:38:00 2005
--- squid/src/client_side.c	Fri Aug 19 03:17:55 2005
***************
*** 41,46 ****
--- 41,60 ----
  #endif
  #include <netinet/tcp.h>
  #include <net/if.h>
+ /* SG - 14 Aug 2005
+  * Workaround needed to allow the build of both ipfilter and ARP acl
+  * support on Solaris x86.
+  * 
+  * Some defines, like
+  * #define free +
+  * are used in squid.h to block misuse of standard malloc routines
+  * where the Squid versions should be used. This pollutes the C/C++
+  * token namespace crashing any structures or classes having members
+  * of the same names.
+  */
+ #ifdef _SQUID_SOLARIS_
+ #undef free
+ #endif
  #if HAVE_IP_FIL_COMPAT_H
  #include <ip_fil_compat.h>
  #elif HAVE_NETINET_IP_FIL_COMPAT_H
