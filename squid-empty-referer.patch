diff -Nur squid-2.5.STABLE3.orig/src/client_side_request.cc squid-2.5.STABLE3/src/client_side_request.cc
--- squid-2.5.STABLE3.orig/src/client_side_request.cc	Mon Sep  8 15:44:34 2003
+++ squid-2.5.STABLE3/src/client_side_request.cc	Mon Sep  8 17:00:06 2003
@@ -945,12 +945,16 @@
 #if USE_USERAGENT_LOG
     if ((str = req_hdr->getStr(HDR_USER_AGENT)))
         logUserAgent(fqdnFromAddr(http->getConn()->log_addr), str);
+    else
+        logUserAgent(fqdnFromAddr(http->getConn()->log_addr), "-");
 
 #endif
 #if USE_REFERER_LOG
 
     if ((str = req_hdr->getStr(HDR_REFERER)))
         logReferer(fqdnFromAddr(http->getConn()->log_addr), str, http->log_uri);
+    else
+        logReferer(fqdnFromAddr(http->getConn()->log_addr), "-", http->log_uri);
 
 #endif
 #if FORW_VIA_DB
